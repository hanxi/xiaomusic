---
title: å·²æ”¯æŒé…ç½®è‡ªå®šä¹‰ç½‘ç»œæ­Œå•ï¼Œåœ¨è¿™é‡Œåˆ†äº«ä½ çš„æ­Œå•
---

# å·²æ”¯æŒé…ç½®è‡ªå®šä¹‰ç½‘ç»œæ­Œå•ï¼Œåœ¨è¿™é‡Œåˆ†äº«ä½ çš„æ­Œå•

è®¾ç½®é¡µé¢æ–°å¢ä¸€ä¸ªè¾“å…¥æ¡†é…ç½®jsonæ ¼å¼ï¼Œå¯ä»¥å®šä¹‰é…ç½®éŸ³ä¹æºï¼Œå¯ä»¥æ˜¯ç”µå°æˆ–è€…å…¶ä»–çš„m3u8æ ¼å¼çš„ã€‚
å†åŠ ä¸€ä¸ªè¾“å…¥æ¡†é…ç½®è¿™ä¸ªjsonæ–‡ä»¶çš„urlï¼Œç‚¹å‡»è·å–æŒ‰é’®æŠŠurlå¯¹åº”çš„jsonå†…å®¹å¡«å……åˆ°jsonè¾“å…¥æ¡†ï¼Œæ–¹ä¾¿ç›´æ¥ä½¿ç”¨åˆ«äººåˆ†äº«çš„æ­Œå•ã€‚

æ¯”å¦‚è¿™æ ·çš„é“¾æ¥
- https://lhttp.qtfm.cn/live/4915/64k.mp3
- http://ngcdn001.cnr.cn/live/zgzs/index.m3u8

å·²ç»æµ‹è¯•èƒ½æ’­æ”¾å‡ºæ¥:
```
python3 micli.py play http://ngcdn001.cnr.cn/live/zgzs/index.m3u8
```

é¢„è®¡æ­Œå•æ ¼å¼æ˜¯è¿™æ ·çš„, type ä¸º radio ä½œä¸ºç”µå°çš„è®¾å®šï¼Œä¼šä¸€ç›´æ’­æ”¾å½“å‰ç”µå°ï¼Œä¸ä¼šæ’­æ”¾ä¸‹ä¸€é¦–ã€‚
```json
[
  {
    "name":"æ­Œå•1",
    "musics":[
      {
        "name":"æ­Œå1",
        "url":"http://ngcdn001.cnr.cn/live/zgzs/index.m3u8",
        "type":"radio"
      },
      {
        "name":"æ­Œå2",
        "url":"https://lhttp.qtfm.cn/live/4915/64k.mp3"
      }
    ]
  },
  {
    "name":"æ­Œå•2",
    "musics":[
      {
        "name":"æ­Œå3",
        "url":"https://lhttp.qtfm.cn/live/4915/64k.mp3"
      },
      {
        "name":"æ­Œå4",
        "url":"https://lhttp.qtfm.cn/live/4915/64k.mp3"
      }
    ]
  }
]
```

è¿™é‡Œåˆ†äº«ä¸€ä¸ªè®© chatgpt å†™ python è„šæœ¬æ¥ç”Ÿæˆæ­Œå•çš„ä¾‹å­ <https://chatgpt.com/share/6751c019-74c0-800a-a978-a20c636d4464> ã€‚

## è¯„è®º


### è¯„è®º 1 - hanxi

å¯ä»¥ä½¿ç”¨ gist æ¥é…ç½®å’Œåˆ†äº« json æ–‡ä»¶ï¼Œæ¯”å¦‚ https://gist.github.com/hanxi/dda82d964a28f8110f8fba81c3ff8314

ç‚¹å‡» raw å¾—åˆ° json æ–‡ä»¶çš„é“¾æ¥ https://gist.githubusercontent.com/hanxi/dda82d964a28f8110f8fba81c3ff8314/raw/8787844d81c39dbfaad4e37954dd449d8bba5728/example.json

å½“ç„¶è¿˜å¯ä»¥ç”¨å…¶ä»–å·¥å…·åˆ†äº«jsonæ–‡ä»¶ï¼Œæ¯”å¦‚ github å’Œå›½å†…çš„ gitee ã€‚

---

### è¯„è®º 2 - hanxi

å·²ç»æœ‰å·¥å…·æ”¯æŒå°† m3u æ ¼å¼çš„ç”µå°æ–‡ä»¶è½¬ä¸ºç½‘ç»œæ­Œå•æ ¼å¼ï¼Œè§ /issues/88.html

æ¬¢è¿æœ‰å…´è¶£çš„æœ‹å‹åˆ¶ä½œå…¶ä»–æ ¼å¼è½¬æ¢å·¥å…·ï¼Œæ¯”å¦‚ç½‘æ˜“æ­Œå•é‚£ä¸€ç±»çš„ã€‚

---

### è¯„è®º 3 - lazybabyz

æŒ‰ç…§æ•™ç¨‹è®¾ç½®å æ’­æ”¾åˆ—è¡¨é€‰æ‹©m3uç”µå° å†é€‰æ‹©æ’­æ”¾åˆ—è¡¨ æ­Œæ›²ï¼Œç»“æœæ˜¾ç¤ºæ’­æ”¾ä¸­ ä¸æ–­åœ¨è½¬å°
stdout: [08:58:02] [0.3.37] [INFO] 10.0.80.191:24020 - "GET /playingmusic?did=566731712 HTTP/1.1" 200
stdout: [08:58:04] [0.3.37] [INFO] 10.0.80.191:24020 - "GET /playingmusic?did=566731712 HTTP/1.1" 200
stdout: [08:58:04] [0.3.37] [INFO] 10.0.80.191:24020 - "GET /static/default/index.html HTTP/1.1" 304
stdout: [08:58:04] [0.3.37] [INFO] 10.0.80.191:24020 - "GET /getsetting HTTP/1.1" 200
stdout: [08:58:04] [0.3.37] [INFO] 10.0.80.191:24022 - "GET /getversion HTTP/1.1" 200
stdout: [08:58:04] [0.3.37] [INFO] 10.0.80.191:24020 - "GET /musiclist HTTP/1.1" 200
stdout: [08:58:04] [0.3.37] [INFO] 10.0.80.191:24021 - "GET /playingmusic?did=566731712 HTTP/1.1" 200
stdout: [08:58:04] [0.3.37] [INFO] 10.0.80.191:24020 - "GET /static/default/curplaylist?did=566731712 HTTP/1.1" 404
stdout: [08:58:05] [0.3.37] [INFO] 10.0.80.191:24022 - "GET /getvolume?did=566731712 HTTP/1.1" 500
stderr: [08:58:05] [0.3.37] [ERROR] Exception in ASGI application
stderr: Traceback (most recent call last):
stderr:   File "/app/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 406, in run_asgi
stderr:     result = await app(  # type: ignore[func-returns-value]
stderr:   File "/app/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
stderr:     return await self.app(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
stderr:     await super().__call__(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/applications.py", line 113, in __call__
stderr:     await self.middleware_stack(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 187, in __call__
stderr:     raise exc
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 165, in __call__
stderr:     await self.app(scope, receive, _send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 85, in __call__
stderr:     await self.app(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
stderr:     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
stderr:     raise exc
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
stderr:     await app(scope, receive, sender)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 715, in __call__
stderr:     await self.middleware_stack(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 735, in app
stderr:     await route.handle(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 288, in handle
stderr:     await self.app(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 76, in app
stderr:     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
stderr:     raise exc
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
stderr:     await app(scope, receive, sender)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 73, in app
stderr:     response = await f(request)
stderr:   File "/app/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 301, in app
stderr:     raw_response = await run_endpoint_function(
stderr:   File "/app/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
stderr:     return await dependant.call(**values)
stderr:   File "/app/xiaomusic/httpserver.py", line 124, in getvolume
stderr:     volume = await xiaomusic.get_volume(did=did)
stderr:   File "/app/xiaomusic/xiaomusic.py", line 809, in get_volume
stderr:     return await self.devices[did].get_volume()
stderr:   File "/app/xiaomusic/xiaomusic.py", line 1400, in get_volume
stderr:     playing_info = await self.xiaomusic.mina_service.player_get_status(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 103, in player_get_status
stderr:     return await self.ubus_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 59, in ubus_request
stderr:     result = await self.mina_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 49, in mina_request
stderr:     return await self.account.mi_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/miaccount.py", line 150, in mi_request
stderr:     raise Exception(f"Error {url}: {resp}")
stderr: Exception: Error https://api2.mina.mi.com/remote/ubus: {'code': 101, 'message': 'ubus server or device returned invalid result', 'data': {'device_data': '{"msg":"Device is offline","code":608}', 'reqID': 'app_ios_YfG6nlPVAtwDHEgMeJXxcOiZQLrR57'}}
stderr: [08:58:05] [0.3.37] [ERROR] h11_impl.py:411: Exception in ASGI application
stderr: Traceback (most recent call last):
stderr:   File "/app/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 406, in run_asgi
stderr:     result = await app(  # type: ignore[func-returns-value]
stderr:   File "/app/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
stderr:     return await self.app(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
stderr:     await super().__call__(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/applications.py", line 113, in __call__
stderr:     await self.middleware_stack(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 187, in __call__
stderr:     raise exc
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 165, in __call__
stderr:     await self.app(scope, receive, _send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 85, in __call__
stderr:     await self.app(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
stderr:     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
stderr:     raise exc
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
stderr:     await app(scope, receive, sender)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 715, in __call__
stderr:     await self.middleware_stack(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 735, in app
stderr:     await route.handle(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 288, in handle
stderr:     await self.app(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 76, in app
stderr:     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
stderr:     raise exc
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
stderr:     await app(scope, receive, sender)
stderr:   File "/app/.venv/lib/python3.10/site-packages/starlette/routing.py", line 73, in app
stderr:     response = await f(request)
stderr:   File "/app/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 301, in app
stderr:     raw_response = await run_endpoint_function(
stderr:   File "/app/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
stderr:     return await dependant.call(**values)
stderr:   File "/app/xiaomusic/httpserver.py", line 124, in getvolume
stderr:     volume = await xiaomusic.get_volume(did=did)
stderr:   File "/app/xiaomusic/xiaomusic.py", line 809, in get_volume
stderr:     return await self.devices[did].get_volume()
stderr:   File "/app/xiaomusic/xiaomusic.py", line 1400, in get_volume
stderr:     playing_info = await self.xiaomusic.mina_service.player_get_status(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 103, in player_get_status
stderr:     return await self.ubus_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 59, in ubus_request
stderr:     result = await self.mina_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 49, in mina_request
stderr:     return await self.account.mi_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/miaccount.py", line 150, in mi_request
stderr:     raise Exception(f"Error {url}: {resp}")
stderr: Exception: Error https://api2.mina.mi.com/remote/ubus: {'code': 101, 'message': 'ubus server or device returned invalid result', 'data': {'device_data': '{"msg":"Device is offline","code":608}', 'reqID': 'app_ios_YfG6nlPVAtwDHEgMeJXxcOiZQLrR57'}}
stdout: [08:58:05] [0.3.37] [INFO] 10.0.80.191:24020 - "GET /playingmusic?did=566731712 HTTP/1.1" 200
stdout: [08:58:05] [0.3.37] [INFO] 10.0.80.191:24021 - "GET /playingmusic?did=566731712 HTTP/1.1" 200
stdout: [08:58:07] [0.3.37] [INFO] 10.0.80.191:24021 - "GET /playingmusic?did=566731712 HTTP/1.1" 200
stdout: [08:58:08] [0.3.37] [INFO] 10.0.80.191:24021 - "GET /playingmusic?did=566731712 HTTP/1.1" 200
stdout: [08:58:08] [0.3.37] [INFO] 10.0.80.191:24020 - "GET /playingmusic?did=566731712 HTTP/1.1" 200
stderr: [08:58:09] [0.3.37] [INFO] httpserver.py:177: docmd. did:566731712 cmd:æ’­æ”¾åˆ—è¡¨m3uç”µå°|80åéŸ³æ‚¦å°
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:582: cancel_all_tasks no task
stdout: [08:58:09] [0.3.37] [INFO] 10.0.80.191:24020 - "POST /cmd HTTP/1.1" 200
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:560: æ”¶åˆ°æ¶ˆæ¯:æ’­æ”¾åˆ—è¡¨m3uç”µå°|80åéŸ³æ‚¦å° æ§åˆ¶é¢æ¿:True did:566731712
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:648: åŒ¹é…åˆ°æŒ‡ä»¤. opkey:æ’­æ”¾åˆ—è¡¨ opvalue:play_music_list oparg:m3uç”µå°|80åéŸ³æ‚¦å°
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:716: æ ¹æ®ã€m3uç”µå°ã€‘æ‰¾åˆ°æ’­æ”¾åˆ—è¡¨ã€m3uç”µå°ã€‘
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:991: æ²¡æ‰“ä¹± m3uç”µå° ['80åéŸ³æ‚¦å°', 'BBC Radio 1', 'BBC Radio 2', 'BBC Radio 3', 'BBC Radio 4', 'CNA938', 'FM 988', ' AFO Radio', 'BBC News', 'BBC Radio 1 Dance', 'BBC Radio 1 Relax', 'BBC Radio 1Xtra', 'BBC Radio 4 Extra', 'BBC Radio 5 Live', 'BBC Radio 6 Music', 'BCCä¸­å¹¿æ–°é—»', 'BCCä¸­å¹¿æµè¡Œ', 'BCCä¸­å¹¿éŸ³ä¹', 'CNAäºšæ´²æ–°é—»', 'CNRä¸­å›½ä¹‹å£°', 'CNRä¹¡æ‘ä¹‹å£°', 'CNRäº¤é€šå¹¿æ’­', 'CNRå°æµ·ä¹‹å£°', 'CNRæ–‡è‰ºä¹‹å£°', 'CNRæ¹¾åŒºä¹‹å£°', 'CNRç¥å·ä¹‹å£°', 'CNRç»å…¸éŸ³ä¹', 'CNRç»æµä¹‹å£°', 'CNRè€å¹´ä¹‹å£°', 'CNRé˜…è¯»ä¹‹å£°', 'CNRéŸ³ä¹ä¹‹å£°', 'CRIä¸–ç•Œåå£°', 'CRIåè¯­ç¯çƒ', 'CRIå—æµ·ä¹‹å£°', 'CRIç¯çƒèµ„è®¯', 'CRIè‹±è¯­èµ„è®¯', 'CRIè½»æ¾è°ƒé¢‘', 'Capital FM', 'CityFMå°ä¹‹éŸ³', 'Cool Radio', 'Gold FM', 'Hit FMåŠ²æ›²', 'Kiss FM', 'LBC News', 'LBC UK', 'Love FM', 'Love Radio', 'Money FM', 'NPR News', 'News Radio UK', 'One FM', 'Power FM', 'RFA', 'RFI', 'RTIä¸­å¤®å¹¿æ’­', 'Times Radio', 'VOAç¯çƒè‹±è¯­', 'Yes FM', 'ä¸Šæµ·æ•…äº‹å¹¿æ’­', 'ä¸Šæµ·æµè¡ŒéŸ³ä¹', 'ä¸Šæµ·éŸ³ä¹å¹¿æ’­', 'ä¸Šæµ·éŸ³ä¹ç”µå°', 'ä¸­æ–‡æµè¡Œ', 'å…¨å›½å¹¿æ’­', 'åŒ—äº¬äº¤é€šå¹¿æ’­', 'åŒ—äº¬ä½“è‚²å¹¿æ’­', 'åŒ—äº¬åŸå¸‚å¹¿æ’­', 'åŒ—äº¬æ–‡è‰ºå¹¿æ’­', 'åŒ—äº¬æ–°é—»å¹¿æ’­', 'åŒ—äº¬ç»å…¸è°ƒé¢‘', 'åŒ—äº¬éŸ³ä¹å¹¿æ’­', 'å—äº¬éŸ³ä¹å¹¿æ’­', 'å°ä¸­å¹¿æ’­ç”µå°', 'å››å·æ–‡è‰ºå¹¿æ’­', 'å›½ä¹æ‚ æ‰¬', 'å¤©ç±ä¹‹éŸ³ Hi-Fi', 'å¤©ç±å¤å…¸', 'å¤©ç±å›½é£', 'å®‰å…¨ç™¾ç§‘', 'å±±è¥¿æ–‡è‰ºå¹¿æ’­', 'å¹¿ä¸œéŸ³ä¹ä¹‹å£°', 'å¹¿å·æ±½è½¦éŸ³ä¹', 'æ‘‡æ»šå¤©ç©º', 'æœ‰å£°æ–‡æ‘˜', 'æ°‘è°£è“è°ƒ', 'æ°‘è°£éŸ³ä¹å°', 'æ±Ÿè‹æ•…äº‹å¹¿æ’­', 'æ±Ÿè‹æ–‡è‰ºå¹¿æ’­', 'æ±Ÿè‹éŸ³ä¹å¹¿æ’­', 'æ²³åŒ—æ–‡è‰ºå¹¿æ’­', 'æ²³åŒ—æ±½è½¦éŸ³ä¹', 'æ·±åœ³éŸ³ä¹å¹¿æ’­', 'æ¹–å—æ–‡è‰ºå¹¿æ’­', 'æ¹–å—æ—…æ¸¸å¹¿æ’­', 'æ¹–å—éŸ³ä¹ä¹‹å£°', 'æ½®æµéŸ³æ‚¦å°', 'ç»å…¸FM', 'ç¾å›½ä¹‹éŸ³', 'é™•è¥¿æ•…äº‹å¹¿æ’­', 'é™•è¥¿éŸ³ä¹å¹¿æ’­']
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:1422: å¼€å§‹æ’­æ”¾åˆ—è¡¨m3uç”µå°
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:1005: play. search_key: name:80åéŸ³æ‚¦å°
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:663: æ ¹æ®ã€80åéŸ³æ‚¦å°ã€‘æ‰¾åˆ°æ­Œæ›²ã€80åéŸ³æ‚¦å°ã€‘
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:1088: cur_music 80åéŸ³æ‚¦å°
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:388: get_music_url web music. name:80åéŸ³æ‚¦å°, url:http://stream3.hndt.com/now/SFZeH2cb/playlist.m3u8
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:360: get_music_sec_url. name:80åéŸ³æ‚¦å° url:http://stream3.hndt.com/now/SFZeH2cb/playlist.m3u8
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:362: ç”µå°ä¸ä¼šæœ‰æ’­æ”¾æ—¶é•¿
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:1437: group_force_stop_xiaoai ['be1daeaa-df03-4a27-8aff-404356abfa9a']
stderr: [08:58:09] [0.3.37] [ERROR] xiaomusic.py:1137: Execption Error https://api2.mina.mi.com/remote/ubus: {'code': 101, 'message': 'ubus server or device returned invalid result', 'data': {'device_data': '{"msg":"Device is offline","code":608}', 'reqID': 'app_ios_10DxZOintrGWhyETo4q9auU3VMNH6A'}}
stderr: Traceback (most recent call last):
stderr:   File "/app/xiaomusic/xiaomusic.py", line 1131, in force_stop_xiaoai
stderr:     ret = await self.xiaomusic.mina_service.player_pause(device_id)
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 79, in player_pause
stderr:     return await self.ubus_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 59, in ubus_request
stderr:     result = await self.mina_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 49, in mina_request
stderr:     return await self.account.mi_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/miaccount.py", line 150, in mi_request
stderr:     raise Exception(f"Error {url}: {resp}")
stderr: Exception: Error https://api2.mina.mi.com/remote/ubus: {'code': 101, 'message': 'ubus server or device returned invalid result', 'data': {'device_data': '{"msg":"Device is offline","code":608}', 'reqID': 'app_ios_10DxZOintrGWhyETo4q9auU3VMNH6A'}}
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:1440: group_force_stop_xiaoai ['be1daeaa-df03-4a27-8aff-404356abfa9a'] [None]
stderr: [08:58:09] [0.3.37] [INFO] xiaomusic.py:1091: æ’­æ”¾ http://stream3.hndt.com/now/SFZeH2cb/playlist.m3u8
stderr: [08:58:10] [0.3.37] [ERROR] xiaomusic.py:1332: Execption Error https://api2.mina.mi.com/remote/ubus: {'code': 101, 'message': 'ubus server or device returned invalid result', 'data': {'device_data': '{"msg":"Device is offline","code":608}', 'reqID': 'app_ios_Bbkf4HLQiN7tjl1rGD2gpXuJ8yI0nP'}}
stderr: Traceback (most recent call last):
stderr:   File "/app/xiaomusic/xiaomusic.py", line 1327, in play_one_url
stderr:     ret = await self.xiaomusic.mina_service.play_by_url(device_id, url)
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 125, in play_by_url
stderr:     return await self.ubus_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 59, in ubus_request
stderr:     result = await self.mina_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/minaservice.py", line 49, in mina_request
stderr:     return await self.account.mi_request(
stderr:   File "/app/.venv/lib/python3.10/site-packages/miservice/miaccount.py", line 150, in mi_request
stderr:     raise Exception(f"Error {url}: {resp}")
stderr: Exception: Error https://api2.mina.mi.com/remote/ubus: {'code': 101, 'message': 'ubus server or device returned invalid result', 'data': {'device_data': '{"msg":"Device is offline","code":608}', 'reqID': 'app_ios_Bbkf4HLQiN7tjl1rGD2gpXuJ8yI0nP'}}
stderr: [08:58:10] [0.3.37] [INFO] xiaomusic.py:1305: group_player_play http://stream3.hndt.com/now/SFZeH2cb/playlist.m3u8 ['be1daeaa-df03-4a27-8aff-404356abfa9a'] [None]
stderr: [08:58:10] [0.3.37] [INFO] xiaomusic.py:1094: æ’­æ”¾ 80åéŸ³æ‚¦å° å¤±è´¥

---

### è¯„è®º 4 - hanxi

è®¾å¤‡æ‰çº¿äº†

---

### è¯„è®º 5 - 201692929

æ€ä¹ˆè·å– ä»–æ­£åœ¨æ’­æ”¾ä»€ä¹ˆï¼Ÿæˆ–è€…æ˜¯æ’­æ”¾è¿›åº¦ ï¼Ÿæ’­æ”¾åˆ—è¡¨ï¼Ÿæˆ‘æƒ³ç»™ä»–åŠ è¿›å»
![233333](https://github.hanxi.cc/proxy/user-attachments/assets/013cd952-69e9-4754-870f-2d5321865179)


---

### è¯„è®º 6 - hanxi

> æ€ä¹ˆè·å– ä»–æ­£åœ¨æ’­æ”¾ä»€ä¹ˆï¼Ÿæˆ–è€…æ˜¯æ’­æ”¾è¿›åº¦ ï¼Ÿæ’­æ”¾åˆ—è¡¨ï¼Ÿæˆ‘æƒ³ç»™ä»–åŠ è¿›å» ![233333](https://private-user-images.githubusercontent.com/100142519/372926296-013cd952-69e9-4754-870f-2d5321865179.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mjc4ODY3MzUsIm5iZiI6MTcyNzg4NjQzNSwicGF0aCI6Ii8xMDAxNDI1MTkvMzcyOTI2Mjk2LTAxM2NkOTUyLTY5ZTktNDc1NC04NzBmLTJkNTMyMTg2NTE3OS5qcGc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQxMDAyJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MTAwMlQxNjI3MTVaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0wNzI5OTdhOTAxMmIwMDkxZTBjOGNhYTZkOWVjY2MwZTRmNGE0YTYzNDFhNGY1YzNjNTI4ZWY0YzYzYzc0Nzk3JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.4-5nGDdkDv9FRp9bAnwN4dzmf4wqKHnG4bW44BhVyRQ)

è¿™ä¸ªæ¥å£ `/playingmusic`

---

### è¯„è®º 7 - 114514thD

åŠ ä¸åŠ "type":"radio"éƒ½ä¼šä¸€ç›´æ’­æ”¾ä¸åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–æ­Œæ˜¯ä¸ºä»€ä¹ˆå‘¢

---

### è¯„è®º 8 - hanxi

> åŠ ä¸åŠ "type":"radio"éƒ½ä¼šä¸€ç›´æ’­æ”¾ä¸åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–æ­Œæ˜¯ä¸ºä»€ä¹ˆå‘¢

å‘å‡ºæ¥çœ‹çœ‹ï¼Ÿ

---

### è¯„è®º 9 - 114514thD

> > åŠ ä¸åŠ "type":"radio"éƒ½ä¼šä¸€ç›´æ’­æ”¾ä¸åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–æ­Œæ˜¯ä¸ºä»€ä¹ˆå‘¢
> 
> å‘å‡ºæ¥çœ‹çœ‹ï¼Ÿ

~~æœ¬åœ°å¼€æœåŠ¡å™¨ï¼Œç”Ÿæˆçš„m3uåˆ—è¡¨
æ ¼å¼å¦‚ä¸‹
`#EXTINF:247,å‘¨ä¼ é›„ - ä¸´åˆ«ä¸€çœ¼.mp3
http://192.168.1.147:8000/%E5%91%A8%E4%BC%A0%E9%9B%84%20-%20%E4%B8%B4%E5%88%AB%E4%B8%80%E7%9C%BC.mp3`
åŒ…å«äº†æ—¶é•¿ä¿¡æ¯
ç‰ˆæœ¬æ˜¯0.3.46
potplayeré‡Œæ’­æ”¾å®Œå…¨æ­£å¸¸~~

ä»”ç»†ç ”ç©¶äº†ä¸€ä¸‹ï¼Œå‘ç°ç¡®å®å­˜åœ¨é—®é¢˜ï¼Œä¸è¿‡æ˜¯å¦ä¸€ç§æƒ…å†µï¼Œä¸‹é¢å•è¯´

---

### è¯„è®º 10 - 114514thD

> > åŠ ä¸åŠ "type":"radio"éƒ½ä¼šä¸€ç›´æ’­æ”¾ä¸åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–æ­Œæ˜¯ä¸ºä»€ä¹ˆå‘¢
> 
> å‘å‡ºæ¥çœ‹çœ‹ï¼Ÿ

ç»è¿‡å®éªŒå‘ç°ï¼Œæœ¬åœ°ç”Ÿæˆçš„m3uç”¨potplayeræ’­æ”¾æ­£å¸¸
![image](https://github.hanxi.cc/proxy/user-attachments/assets/754e4344-9262-4ad1-bf17-dd83f5e3b6e5)
è½¬æ¢ä¸ºjsonï¼ˆå»æ‰"type":"radio"ï¼‰åç”¨å°çˆ±æ’­æ”¾ä¹Ÿæ­£å¸¸
![image](https://github.hanxi.cc/proxy/user-attachments/assets/9f1a9f02-6cf1-4536-91bd-e5e3677d6513)

ä½†æ˜¯alisté“¾æ¥å°±ä¸æ­£å¸¸ï¼Œalistç”Ÿæˆçš„m3uæ ¼å¼å¦‚ä¸‹
`#EXTM3U
#EXTINF:-1,Let Me Hear.mp3
http://192.168.1.198:5244/d/%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%20%E9%9F%B3%E4%B9%90%E4%BA%91%E7%9B%98/Let%20Me%20Hear.mp3?sign=xxxx=:0`
æ²¡æœ‰æ—¶é•¿ä¿¡æ¯ï¼Œä½†æ˜¯ç”¨potplayerä¸€æ’­æ”¾å°±å‡ºç°æ—¶é•¿äº†
![image](https://github.hanxi.cc/proxy/user-attachments/assets/34ac4b9f-8b7f-40d7-9ac9-aa4621b59aa3)
è€Œç”¨å°çˆ±æ’­æ”¾å°±å§‹ç»ˆæ²¡æœ‰æ—¶é•¿ï¼ˆåˆ‡æ­Œã€ç­‰å¾…éƒ½è¯•è¿‡äº†ï¼‰
![image](https://github.hanxi.cc/proxy/user-attachments/assets/a42b62e4-7a48-46b8-b83b-a4c8cb219c0b)
å¤§ä½¬ä½ çš„ç¤ºä¾‹é“¾æ¥ï¼ˆgist.github.com/hanxi/dda82d964a28f8110f8fba81c3ff8314ï¼‰é‡Œçš„åˆæ˜¯æ­£å¸¸çš„ï¼Œæ„Ÿè§‰å¯èƒ½æ˜¯alistçš„æµæ¯”è¾ƒç‰¹æ®Šã€‚ã€‚
![image](https://github.hanxi.cc/proxy/user-attachments/assets/f84ab805-54a6-40f1-937c-67832ff0b9d6)

---

### è¯„è®º 11 - 114514thD

> > åŠ ä¸åŠ "type":"radio"éƒ½ä¼šä¸€ç›´æ’­æ”¾ä¸åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–æ­Œæ˜¯ä¸ºä»€ä¹ˆå‘¢
> 
> å‘å‡ºæ¥çœ‹çœ‹ï¼Ÿ

è¿™å‡ å¤©å†ä»”ç»†ç ”ç©¶äº†ä¸€ä¸‹ï¼Œå‘ç°ä¸€ä¸ªå¯èƒ½çš„åŸå› ï¼šè¿™æ ·è·å–åˆ°çš„æ˜¯m4aæ–‡ä»¶ï¼Œæˆ‘å°è¯•ç€åœ¨jsoné‡Œé…ç½®è·å–åˆ°çš„m4aé“¾æ¥ï¼Œå‘ç°æ’­æ”¾åŒæ ·ä¹Ÿæ˜¯æ— æ—¶é•¿

---

### è¯„è®º 12 - hanxi

è·å–æ­Œæ›²æ—¶é•¿ç¡®å®æœ‰äº›æ ¼å¼è·å–ä¸åˆ°ã€‚

---

### è¯„è®º 13 - 114514thD

> è·å–æ­Œæ›²æ—¶é•¿ç¡®å®æœ‰äº›æ ¼å¼è·å–ä¸åˆ°ã€‚

http://m7.music.126.net/20241216093525/75c9080afa2929d7eec8e1cdbcbc0a92/yyaac/0709/535a/5358/0c6e2dcac3d0e9fa4415d22e1eca1337.m4a
ä»¥è¿™ä¸ªæ–‡ä»¶ä¸ºä¾‹ï¼Œæˆ‘ç”¨ffmpegå¯ä»¥è·å–æ—¶é•¿ç­‰å…ƒæ•°æ®
`
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'http://m7.music.126.net/20241216093525/75c9080afa2929d7eec8e1cdbcbc0a92/yyaac/0709/535a/5358/0c6e2dcac3d0e9fa4415d22e1eca1337.m4a':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: M4A mp42isom
    creation_time   : 2019-02-21T02:51:36.000000Z
    iTunSMPB        :  00000000 00000920 000003E8 00000000004BE2F8 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
    encoder         : Nero AAC codec / 1.5.4.0
  Duration: 00:03:45.70, start: 0.052971, bitrate: 64 kb/s
  Chapters:
    Chapter #0:0: start 0.105941, end 225.750930
      Metadata:
        title           :
  Stream #0:0[0x1](und): Audio: aac (HE-AAC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 63 kb/s (default)
    Metadata:
      creation_time   : 2019-02-21T02:51:36.000000Z
      handler_name    : Sound Media Handler
      vendor_id       : [0][0][0][0]`
é‚£æ˜¯ä¸ºä»€ä¹ˆæ’­æ”¾å°±ä¸è¡Œå‘¢

---

### è¯„è®º 14 - hanxi

å› ä¸ºä»£ç æœ‰é—®é¢˜ã€‚

---

### è¯„è®º 15 - 114514thD

> å› ä¸ºä»£ç æœ‰é—®é¢˜ã€‚

å¥½å§ğŸ˜‚ğŸ˜‚ï¼Œå¤§ä½¬çœŸæ˜¯ç›´æ¥ğŸ˜

---

### è¯„è®º 16 - hanxi

é‡æ„æ–¹æ¡ˆ #314 

---
[é“¾æ¥åˆ° GitHub Issue](https://github.com/hanxi/xiaomusic/issues/78)
